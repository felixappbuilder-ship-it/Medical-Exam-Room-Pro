<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome - Medical Exam Room Pro</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Common CSS -->
    <link rel="stylesheet" href="css/common.css">
    
    <!-- Page-specific CSS -->
    <link rel="stylesheet" href="css/welcome.css">
    
    <!-- Favicon -->
    <link rel="icon" href="images/logo.png" type="image/png">
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(function(registration) {
                        console.log('Service Worker registered with scope:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <img src="images/logo.png" alt="Medical Exam Room Pro Logo" class="logo-image">
                <h1 class="logo-text">Medical Exam Room Pro</h1>
            </div>
            
            <div class="header-actions">
                <!-- Theme Toggle -->
                <button class="theme-toggle" id="themeToggle">
                    <span class="theme-icon">üåô</span>
                    <span class="theme-text">Dark Mode</span>
                </button>
                
                <!-- Back to Home -->
                <button class="btn-back" id="backBtn">
                    <span class="back-icon">‚Üê</span>
                    <span class="back-text">Home</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="welcome-container">
            <div class="welcome-header">
                <h2>Welcome to Medical Exam Room Pro</h2>
                <p class="welcome-subtitle">Your path to medical exam excellence starts here</p>
            </div>
            
            <div class="welcome-card">
                <div class="welcome-icon">üéØ</div>
                <h3>What You'll Get</h3>
                
                <div class="benefits-list">
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úÖ</span>
                        <span class="benefit-text">5,000+ medically reviewed questions</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úÖ</span>
                        <span class="benefit-text">100% offline studying capability</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úÖ</span>
                        <span class="benefit-text">Adaptive exam timing system</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úÖ</span>
                        <span class="benefit-text">Detailed performance analytics</span>
                    </div>
                    <div class="benefit-item">
                        <span class="benefit-icon">‚úÖ</span>
                        <span class="benefit-text">M-Pesa payment integration</span>
                    </div>
                </div>
            </div>
            
            <div class="action-buttons">
                <button class="btn-primary btn-large" id="loginBtn">
                    <span class="btn-icon">üîê</span>
                    <span class="btn-text">Login to Your Account</span>
                </button>
                
                <button class="btn-secondary btn-large" id="signupBtn">
                    <span class="btn-icon">üìù</span>
                    <span class="btn-text">Create New Account</span>
                </button>
                
                <div class="divider">
                    <span class="divider-text">or</span>
                </div>
                
                <button class="btn-trial btn-large" id="startTrialBtn">
                    <span class="btn-icon">üéÅ</span>
                    <span class="btn-text">Start 3-Hour Free Trial</span>
                    <span class="trial-badge">No Registration Required</span>
                </button>
            </div>
            
            <div class="trial-info">
                <h4>About Free Trial</h4>
                <ul>
                    <li>Full access to all 5,000+ questions</li>
                    <li>All exam modes available</li>
                    <li>Works 100% offline</li>
                    <li>One trial per device</li>
                    <li><strong>Warning:</strong> Time manipulation will lock your account permanently</li>
                </ul>
            </div>
            
            <div class="security-notice">
                <div class="security-icon">‚ö†Ô∏è</div>
                <p><strong>Security Notice:</strong> This app has strict anti-cheating measures. Any attempt to manipulate time or bypass subscription will result in permanent account lock.</p>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer-minimal">
        <p>Need help? Contact: felixappbuilder@gmail.com | 0746834527</p>
        <p>¬© 2024 Medical Exam Room Pro</p>
    </footer>

    <!-- JavaScript Files -->
    <script src="scripts/app.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/utils.js"></script>
    <script src="scripts/router.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Theme toggle
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = themeToggle.querySelector('.theme-icon');
            const themeText = themeToggle.querySelector('.theme-text');
            
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.classList.toggle('dark-theme', savedTheme === 'dark');
            
            if (savedTheme === 'dark') {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light Mode';
            }
            
            themeToggle.addEventListener('click', function() {
                const isDark = document.body.classList.toggle('dark-theme');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                
                if (isDark) {
                    themeIcon.textContent = '‚òÄÔ∏è';
                    themeText.textContent = 'Light Mode';
                } else {
                    themeIcon.textContent = 'üåô';
                    themeText.textContent = 'Dark Mode';
                }
            });
            
            // Navigation buttons
            const backBtn = document.getElementById('backBtn');
            const loginBtn = document.getElementById('loginBtn');
            const signupBtn = document.getElementById('signupBtn');
            const startTrialBtn = document.getElementById('startTrialBtn');
            
            backBtn.addEventListener('click', function() {
                window.location.href = 'index.html';
            });
            
            loginBtn.addEventListener('click', function() {
                window.location.href = 'login.html';
            });
            
            signupBtn.addEventListener('click', function() {
                window.location.href = 'signup.html';
            });
            
            startTrialBtn.addEventListener('click', function() {
                // Check if device already used trial
                const deviceId = localStorage.getItem('deviceFingerprint');
                const trialUsed = localStorage.getItem('trialUsed_' + deviceId);
                
                if (trialUsed === 'true') {
                    alert('Free trial already used on this device. Please subscribe to continue.');
                    window.location.href = 'subscription.html';
                } else {
                    window.location.href = 'free-trial.html';
                }
            });
            
            // Initialize app state
            if (typeof initApp === 'function') {
                initApp();
            }
        });
    </script>
</body>
</html>